<%- include('../partials/head'); %>

<body>
    <div class="container" style="margin-top: 30px;">
        <h1>Add Data</h1>
        <form id="data-form">
            <div class="form-group row">
                <label for="inputString" class="col-sm-2 col-form-label">String</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" name="string" id="string" placeholder="String">
                </div>
            </div>
            <div class="form-group row">
                <label for="inputInteger" class="col-sm-2 col-form-label">Integer</label>
                <div class="col-sm-8">
                    <input type="number" class="form-control" name="integer" id="integer" placeholder="Integer">
                </div>
            </div>
            <div class="form-group row">
                <label for="inputFloat" class="col-sm-2 col-form-label">Float</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" name="float" id="float" placeholder="Float">
                </div>
            </div>
            <div class="form-group row">
                <label for="inputDate" class="col-sm-2 col-form-label">Date</label>
                <div class="col-sm-8">
                    <input type="date" class="form-control" name="date" id="date" placeholder="End date">
                </div>
            </div>
            <div class="form-group row">
                <label for="selectBoolean" class="col-sm-2 col-form-label">Boolean</label>
                <div class="col-sm-8">
                    <select class="form-control" name="boolean" id="boolean">
                        <option>Choose the boolean ...</option>
                        <option value="true">True</option>
                        <option value="false">False</option>
                    </select>
                </div>
            </div>
            <div>
                <input type="submit" class="btn btn-primary" value="Save" />
            </div>
        </form>
    </div>
    <script>
        const API_URL = "http://localhost:3000/api/index";
        $(document).ready(function () {
            tambahData();
        })

        const tambahData = () => {
            $('#data-form').on('submit', (e) => {
                e.preventDefault();
                let id = $('#id');
                let string = $('#string');
                let integer = $('#integer');
                let float = $('#float');
                let date = $('#date');
                let boolean = $('#boolean');

                $.ajax({
                    url: `${API_URL}/add`,
                    method: 'POST',
                    data: {
                        id: id.val(),
                        string: string.val(),
                        integer: integer.val(),
                        float: float.val(),
                        date: date.val(),
                        boolean: boolean.val()
                    }
                }).done(function () {
                    window.location.href = "/";
                }).fail(function (jqXHR, textStatus) {
                    alert("Request failed get data: " + textStatus);
                })
            })
        }
    </script>
</body>
<%- include('../partials/footer'); %>